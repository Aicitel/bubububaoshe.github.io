<!DOCUMENTTYPE html>
<html>

<head>
	<title>test</title>
	<meta charset="UTF-8">
	<link rel="stylesheet" type="text/css" href="main.css">
</head>

<body>
	<div id="main">
		<div id="scoreboard">
		</div>
		<div id="gamezone">
			<div id="hand0"><div class="dummycard"></div></div>
			<div id="pool"><div class="dummycard"></div></div>
			<div id="hand1"><div class="dummycard"></div></div>
		</div>
		<div id="specialboard">
			<div id="infobox"><div class="dummycard"></div>
      </div>
		</div>
	</div>
</body>

</html>
<style>

</style>
<script src="model.js"></script>
<script src="view.js"></script>
<script>
  function setSizes() {
    var winW = window.innerWidth;
    var winH = window.innerHeight;
    var mainH = Math.floor(winH - winH * MAINMARGINPERCENT * 2);
    var mainW = Math.floor(winW - winH * MAINMARGINPERCENT * 2);
    if (MAINRATIO > 0) {
      if (mainW / mainH > MAINRATIO)
        mainW = Math.floor(mainH * MAINRATIO);
      else
        mainH = Math.floor(mainW / MAINRATIO);
    }
    var tMargin = Math.floor((winH - mainH) / 2);
    var scbW = Math.floor(mainH * SCOREBOARDPERCENT);
    var spbW = Math.floor(mainH * SPECIALBOARDPERCENT);
    var gamezoneW = mainW - scbW - spbW - BLOCKMARGIN * 2;
    var player0H = Math.floor(mainH * PLAYER0PERCENT);
    var player1H = Math.floor(mainH * PLAYER1PERCENT);
    var poolH = mainH - player0H - player1H - BLOCKMARGIN * 2;
    var cardW = Math.floor(gamezoneW * (1 - 3 * HANDLEFTPADDINGPERCENT) / (9 * (1 - HANDCARDOVERLAPPERCENT) + 1));
    var cardH = Math.floor(cardW / CARDRATIO);
    var cardIL = gamezoneW - Math.floor(cardW * 1.3);
    var hand0CT = Math.floor((player0H - cardH) / 2);
    var poolCT = Math.floor((poolH - cardH) / 2);
    var hand1CT = Math.floor((player1H - cardH) * HANDTOPPERCENT);
    var hand1CT2 = Math.floor((player1H - cardH) * HANDTOPPERCENT2);
    var hand1CT3 = Math.floor((player1H - cardH) * HANDTOPPERCENT3);
    var handOFS = Math.floor(cardW * (1 - HANDCARDOVERLAPPERCENT));
    var poolOFS = Math.floor(cardW * (1 - POOLCARDOVERLAPPERCENT));
    var blockLP = Math.floor(gamezoneW * HANDLEFTPADDINGPERCENT);

    setCSSInt("--block-margin", BLOCKMARGIN);
    setCSSInt("--main-height", mainH);
    setCSSInt("--main-width", mainW);
    setCSSInt("--main-margin", tMargin);
    setCSSInt("--scoreboard-width", scbW);
    setCSSInt("--specialboard-width", spbW);
    setCSSInt("--gamezone-width", gamezoneW);
    setCSSInt("--hand0-height", player0H);
    setCSSInt("--hand1-height", player1H);
    setCSSInt("--pool-height", poolH);
    setCSSInt("--card-width", cardW);
    setCSSInt("--card-height", cardH);
    setCSSInt("--card-init-left", cardIL);
    setCSSInt("--hand0-card-top", hand0CT);
    setCSSInt("--pool-card-top", poolCT);
    setCSSInt("--hand1-card-top", hand1CT);
    setCSSInt("--hand1-card-top2", hand1CT2);
    setCSSInt("--hand1-card-top3", hand1CT3);
    setCSSInt("--block-left-padding", blockLP);
  }
  function move(){
    i = (i+1)%4;
    var dummy = cons[i].firstChild;
    var rect = dummy.getBoundingClientRect();
    fly.style.left = rect.left;
    fly.style.top = rect.top;
  }
  setSizes();
  var cons = [document.getElementById("hand0"),
              document.getElementById("pool"),
              document.getElementById("hand1"),
              document.getElementById("infobox")
              ];
  var root = document.querySelector("body");
  i = 41;
  let char = new Character(COMMONCHARLIST[i][0], COMMONCHARLIST[i][1], COMMONCHARLIST[i][2], COMMONCHARLIST[i][3]);
  var fly = createCardDiv(char, "show");
  fly.style.left = 0;fly.style.top=0;root.appendChild(fly);
  root.addEventListener("click", move);
</script>
